<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Prim's Algorithm</title>
        <link rel="stylesheet" href="assets\css\bootstrap.min.css">

        <script src="assets\js\jquery.min.js"></script>
        <script src="assets\js\popper.min.js"></script>
        <script src="assets\js\bootstrap.min.js"></script>
        <script src="assets\js\jquery.session.js"></script>
        <script src="assets\js\jsgraphs.min.js"></script>
        <script src="assets\js\vis.js"></script>
        <script src="assets\js\custom.js"></script>


  </head>
  <body>
    <div class="container-fluid justify-content-center">
        <div class="row justify-content-center align-self-center">
            <div class="col-sm align-self-center">
              <br>
              <br>

                <div class="card text-center">
                    <h5 class="card-header">Final Result!</h5>
                    <div class="card-body">
                        <!-- <h5 class="card-title">Le r√©sultat final!</h5> -->
                        <!-- <p class="card-text"><em>Utilise L'Algorithme de PRIM</em>.</p> -->
                        <!-- <code>Using Eager Prim algorithm to find the minimum spanning tree of a weighted graph.</code> -->
                        <!--<script type="text/javascript">
                          document.write($.session.get('numberOfVertices'))
                          document.write("<br>")

                          document.write($.session.get('AB'))
                          document.write($.session.get('AC'))
                          document.write($.session.get('AD'))
                          document.write("<br>")
                          document.write($.session.get('BA'))
                          document.write($.session.get('BC'))
                          document.write($.session.get('BD'))
                          document.write("<br>")
                          document.write($.session.get('CA'))
                          document.write($.session.get('CB'))
                          document.write($.session.get('CD'))
                          document.write("<br>")

                          document.write($.session.get('DA'))
                          document.write($.session.get('DB'))
                          document.write($.session.get('DC'))
                        </script>-->


                        <center><div id="mynetwork" style="width:768px !important;height:512px !important;"></div></center>

                    <script type="text/javascript">
                      (function(){
                        // A B C D E F G H I
                        // 0 1 2 3 4 5 6 7 8
                        // var g = new jsgraphs.WeightedGraph($.session.get('numberOfVertices'));
                        // var g = new jsgraphs.WeightedGraph(9);
                        var numberOfVerticesFixed = $.session.get('numberOfVertices');
                        numberOfVerticesFixed--;
                        var g = new jsgraphs.WeightedGraph(numberOfVerticesFixed);
                        /* g.addEdge(new jsgraphs.Edge(0, 1, 8));
                        g.addEdge(new jsgraphs.Edge(0, 3, 4));
                        g.addEdge(new jsgraphs.Edge(0, 6, 11));
                        g.addEdge(new jsgraphs.Edge(1, 2, 7));
                        g.addEdge(new jsgraphs.Edge(1, 8, 4));
                        g.addEdge(new jsgraphs.Edge(1, 4, 2));
                        g.addEdge(new jsgraphs.Edge(2, 5, 9));
                        g.addEdge(new jsgraphs.Edge(3, 6, 8));
                        g.addEdge(new jsgraphs.Edge(4, 6, 7));
                        g.addEdge(new jsgraphs.Edge(4, 7, 6));
                        g.addEdge(new jsgraphs.Edge(5, 8, 10));
                        g.addEdge(new jsgraphs.Edge(7, 6, 1));
                        g.addEdge(new jsgraphs.Edge(7, 8, 2)); */

                        /* g.addEdge(new jsgraphs.Edge(0, 2, 600));
                        g.addEdge(new jsgraphs.Edge(0, 6, 780));
                        g.addEdge(new jsgraphs.Edge(0, 4, 650));
                        g.addEdge(new jsgraphs.Edge(0, 5, 490));
                        g.addEdge(new jsgraphs.Edge(1, 3, 490));
                        g.addEdge(new jsgraphs.Edge(1, 4, 630));
                        g.addEdge(new jsgraphs.Edge(1, 6, 580));
                        g.addEdge(new jsgraphs.Edge(2, 4, 210));
                        g.addEdge(new jsgraphs.Edge(3, 6, 600));
                        g.addEdge(new jsgraphs.Edge(4, 6, 230));
                        g.addEdge(new jsgraphs.Edge(7, 5, 120)); */

                        /*var first = 64;
                        var second = 65;
                        var f;
                        var s;
                        for (var i = 0; i < numberOfVerticesFixed; i++) {
                            first++;

                          for (var j = i+1; j < numberOfVerticesFixed; j++) {
                            second++;
                            f = $.session.get(String.fromCharCode(first)+String.fromCharCode(second));
                            s = $.session.get(String.fromCharCode(second)+String.fromCharCode(first));

                            if (f != "undefined" && s != "undefined" && f != null && s != null && f != "" && s != "") {
                              console.log(String.fromCharCode(first)+String.fromCharCode(second) + f);
                              console.log("----------------");
                              // console.log(String.fromCharCode(second)+String.fromCharCode(first) + s);
                              g.addEdge(new jsgraphs.Edge(i, j, f));
                            }
                            // g.addEdge(new jsgraphs.Edge(numberOfVerticesFixed, numberOfVerticesFixed, 10));
                          }
                          second = 65;
                        } */
                        /* var c = 0;
                        for (var i = 0; i < numberOfVerticesFixed; i++) {
                          for (var j = i; j < numberOfVerticesFixed; j++) {
                            // console.log(String.fromCharCode(64+i)+String.fromCharCode(65+j));
                            // console.log($.session.get(String.fromCharCode(64+i)+String.fromCharCode(65+j)));
                            c = $.session.get(String.fromCharCode(64+i)+String.fromCharCode(65+j));
                            if (c != "undefined" && c != null && c != "") {
                              console.log(String.fromCharCode(64+i)+String.fromCharCode(65+j) + " " + c);
                              // console.log();

                                g.addEdge(new jsgraphs.Edge(i, j,c));
                            }
                          }
                        } */
                        /* var first = 64;
                        var second = 65;
                        for (var i = 0; i < numberOfVerticesFixed; i++) {
                            first++;
                          for (var j = i+1; j < numberOfVerticesFixed; j++) {
                            second++;
                            c = $.session.get(String.fromCharCode(first)+String.fromCharCode(second));
                            if (c != "undefined" && c != null && c != "") {
                              console.log(String.fromCharCode(first)+String.fromCharCode(second) + " " + c);
                            }
                          }
                          second = 65;
                        } */
                        for (var i = 0; i < numberOfVerticesFixed; i++) {
                          for (var j = i+1; j < numberOfVerticesFixed; j++) {
                            if ($.session.get(String.fromCharCode(65+i)+String.fromCharCode(65+j)) != "" && $.session.get(String.fromCharCode(65+i)+String.fromCharCode(65+j)) != null && $.session.get(String.fromCharCode(65+i)+String.fromCharCode(65+j)) != "undefined") {
                              // console.log(i + ' ' + j + ' ' + $.session.get(String.fromCharCode(65+i)+String.fromCharCode(65+j)));
                              g.addEdge(new jsgraphs.Edge(i, j, $.session.get(String.fromCharCode(65+i)+String.fromCharCode(65+j))));
                            }
                          }
                        }
                        /*
                        g.addEdge(new jsgraphs.Edge(0, 1, $.session.get(String.fromCharCode(65)+String.fromCharCode(66))));
                        g.addEdge(new jsgraphs.Edge(0, 2, $.session.get(String.fromCharCode(65)+String.fromCharCode(67))));
                        g.addEdge(new jsgraphs.Edge(0, 3, $.session.get(String.fromCharCode(65)+String.fromCharCode(68))));

                        g.addEdge(new jsgraphs.Edge(1, 2, $.session.get(String.fromCharCode(66)+String.fromCharCode(67))));
                        g.addEdge(new jsgraphs.Edge(1, 3, $.session.get(String.fromCharCode(66)+String.fromCharCode(68))));

                        g.addEdge(new jsgraphs.Edge(2, 3, $.session.get(String.fromCharCode(67)+String.fromCharCode(68))));
                        */



                        //g.addEdge(new jsgraphs.Edge(3, 0, $.session.get(String.fromCharCode(67)+String.fromCharCode(68))));

                        // g.addEdge(new jsgraphs.Edge(0, 2, 600));
                        // g.addEdge(new jsgraphs.Edge(0, 1, 780));

                        var prim = new jsgraphs.EagerPrimMST(g);
                        var mst = prim.mst;

                        var g_nodes = [];
                        var g_edges = [];
                        for(var v=0; v < g.V; ++v){
                          g.node(v).label = String.fromCharCode(v+64+1); // assigned 'Node {v}' as label for node v
                          g_nodes.push({
                            id: v,
                            label: g.node(v).label
                          });
                        }
                        var totalWeight = 0;
                        for(var i=0; i < mst.length; ++i) {
                          var e = mst[i];
                          var v = e.either();
                          var w = e.other(v);
                          e.highlighted = true;
                          console.log('(' + v + ', ' + w + '): ' + e.weight);
                          totalWeight += parseInt(e.weight);
                          g_edges.push({
                            from: v,
                            to: w,
                            length: e.weight,
                            label: '' + e.weight,
                            color: '#4CAF50',
                            value: 2
                          });
                        }
                        console.log('totalWeight' + totalWeight)
                        document.write('<h1> Minimum cost of spanning tree possible: ' + totalWeight + ' </h1>')

                        for(var v = 0; v < g.V; ++v) {

                          var adj_v = g.adj(v);
                          for(var i = 0; i < adj_v.length; ++i) {
                            var e = adj_v[i];
                            var w = e.other(v);
                            if(w > v) continue; // make sure only one edge between w and v since the graph is undirected
                            if(e.highlighted) continue;

                            g_edges.push({
                              from: v,
                              to: w,
                              length: e.weight,
                              label: '' + e.weight
                            });
                          };
                        }

                        // console.log(g.V); // display 6, which is the number of vertices in g
                        // console.log(g.adj(0)); // display [5, 1, 2], which is the adjacent list to vertex 0

                        var nodes = new vis.DataSet(g_nodes);
                        // create an array with edges
                        var edges = new vis.DataSet(g_edges);
                        // create a network
                        var container = document.getElementById('mynetwork');
                        var data = {
                          nodes: nodes,
                          edges: edges
                        };
                        var options = {};
                        var network = new vis.Network(container, data, options);
                      })();

                      
                    </script>

                        <a href="../index.html" class="btn btn-danger btn-block">Home</a>
                    </div>
                </div>

            </div>
        </div>
    </div>

    </div>

  </body>
</html>
